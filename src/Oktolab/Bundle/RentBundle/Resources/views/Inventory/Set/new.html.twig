{% extends 'OktolabRentBundle::layout.html.twig' %}

{% block content_header %}
<div class="aui-page-header-inner">
    <div class="aui-page-header-image">
        <div class="aui-avatar aui-avatar-xlarge aui-avatar-project">
            <div class="aui-avatar-inner">
                <img src="static/img/none.png">
            </div>
        </div>
    </div>
    <div class="aui-page-header-main">
        <h1>{{ 'inventory.set.new' | trans }}</h1>
    </div>
    <div class="aui-page-header-actions">
        <div class="aui-buttons">
            <div class="aui-buttons">
                <a class="aui-button" href="{{ path('inventory_set') }}">{{ 'generic.backToList' | trans }}</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
    {{ form_start(form, {'attr': { 'class': 'aui' } }) }}
        <fieldset>
            {{ form_errors(form) }}

            {{ form_row(form.title) }}
            {{ form_row(form.description) }}
            {{ form_row(form.barcode) }}

            <div class="field-group">
                <label for="oktolab_rentbundle_inventory_set_searchItems">{{ 'generic.search' | trans }}</label>
                <input class="text long-field" type="text" id="oktolab_rentbundle_inventory_set_searchItems" name="oktolab_rentbundle_inventory_set_searchItems" title="{{ 'Search for Items' | trans }}">
                <div class="description">{{ 'inventory.set.searchForItems' | trans}}: {{'inventory.item.title' |trans}}, {{'inventory.item.description' |trans}}, {{'inventory.item.barcode' |trans}}</div>
            </div>
        </fieldset>

        <h3>{{ 'inventory.set.items' | trans }}</h3>
            <fieldset>
                <table class="aui">
                    <thead>
                        <tr>
                            <th id="name">{{ 'inventory.item.barcode' | trans }}</th>
                            <th>{{ 'inventory.item.title' | trans }}</th>
                            <th id="basic-action"><span class="aui-icon aui-icon-small aui-iconfont-configure">{{ 'generic.actions' | trans }}</span></th>
                        </tr>
                    </thead>
                    <tbody class="set-items" data-index="0" data-prototype="{% filter escape %}{% include 'OktolabRentBundle:Inventory/Set:itemRowPrototype.html.twig' %}{% endfilter %}">
                        {% if items is defined %}
                            {% for item in items %}
                                <tr>
                                    <td>{{ item.barcode }}</td>
                                    <td>{{ item.title }}</td>
                                    <td><a href="#"><span class="aui-icon aui-icon-small aui-iconfont-remove remove-object" data-value="item:{{ item.id }}' }}">{{ 'generic.remove' | trans }}</span></a></td>
                                </tr>
                            {% endfor %}
                        {% endif %}
                    </tbody>
                </table>
                <field class="plupload" data-plupload="multiple"></field>
                <div id="container" class= "field-group">
                    <div id="filelist">{{ 'generic.loadEngine' | trans }}</div>
                        <br />
                        <a id="pickfiles" href="#">[{{'generic.selectFiles'|trans}}]</a>
                </div>

                <div class="buttons-container">
                    <button class="aui-button aui-button-primary" type="submit">{{ 'generic.submit' | trans }}</button>
                </div>
            </fieldset>

            <fieldset class="hidden-items" style="display:none" data-index="{{ form.items | length }}" data-prototype="{{ '<input type="hidden" id="oktolab_rentbundle_inventory_set_items_{{index}}" name="oktolab_rentbundle_inventory_set[items][{{index}}]" value="{{id}}" />'|e }}">
                {% for item in form.items %}
                    {{ form_row(item) }}
                {% endfor %}
            </fieldset>
    {{ form_end(form) }}
{% endblock %}
