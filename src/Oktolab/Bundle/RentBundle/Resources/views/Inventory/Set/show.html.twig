{% extends 'OktolabRentBundle::layout.html.twig' %}

{% block content_header %}
    <div class="aui-page-header-inner">
        <div class="aui-page-header-image">
            {% if set.picture is not null %}
                <a href="{{ set.picture.getRelativePath | apply_filter('page_avatar_full') }}" class="fancybox" title="{{ set.picture.title }}">
                    <div class="aui-avatar aui-avatar-xlarge aui-avatar-project">
                        <div class="aui-avatar-inner">
                            <img src="{{ set.picture.getRelativePath | apply_filter('page_avatar') }}" />
                        </div>
                    </div>
                </a>
            {% endif %}
        </div>
        <div class="aui-page-header-main">
            <h1>{{set.title}}</h1>
            <h3>{{ 'inventory.set.barcode' | trans }}: {{set.barcode}}</h3>
        </div>
        <div class="aui-page-header-actions">
            <div class="aui-buttons">
                <div class="aui-buttons">
                    <a class="aui-button" href="{{ path('inventory_set_edit', { 'id' : set.id }) }}">{{ 'generic.edit' | trans }}</a>
                    <a class="aui-button" href="{{ path('inventory_set') }}">{{'generic.backToList' | trans }}</a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="aui-page-panel">
        <div class="aui-page-panel-inner">
            <section class="aui-page-panel-content">
                <h3>
                    {{'inventory.set.attachments' | trans }} {{ set.attachments | length }} <a id="replace-text-trigger" data-replace-text="({{ 'generic.hide' | trans }})" class="aui-expander-trigger" aria-controls="expander-with-replace-text-content">({{'generic.show' | trans }})</a>
                </h3>
                <div id="expander-with-replace-text-content" class="aui-expander-content">
                    {% for attachment in set.attachments %}
                        <img src="{{ sauce(attachment) }}" />
                    {% endfor %}
                </div>
                <h3>{{'inventory.set.description' | trans}}</h3>
                <p>{{ set.description }}</p>

                <h3>{{'inventory.set.items' | trans}}</h3>
                <table class="aui">
                    <thead>
                        <tr>
                            <th id="name">{{'inventory.item.title' | trans}}</th>
                            <th>{{'inventory.item.description' | trans}}</th>
                            <th>{{'inventory.item.barcode' | trans}}</th>
                            <th>{{'inventory.item.buydate' | trans}}</th>
                            <th>{{'inventory.item.serialnumber' | trans}}</th>
                            <th>{{'inventory.item.vendor' | trans}}</th>
                            <th>{{'inventory.item.modelnumber' | trans}}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in set.getItems %}
                            <tr>
                                <td headers="name">{{ item.title }}</td>
                                <td>{{ item.description }}</td>
                                <td>{{ item.barcode }}</td>
                                <td>{% if item.buyDate %}{{ item.buyDate|date('Y-m-d') }}{% endif %}</td>
                                <td>{{ item.serialNumber }}</td>
                                <td>{{ item.vendor }}</td>
                                <td>{{ item.modelNumber }}</td>
                                <td class="action" headers="action">
                                    <ul class="menu">
                                        <li>
                                            <a href="{{ path('inventory_item_show', { 'id': item.id }) }}">{{'generic.show' | trans}}</a>
                                        </li>
                                        <li>
                                            <a href="{{ path('inventory_item_edit', { 'id': item.id }) }}">{{'generic.edit' | trans}}</a>
                                        </li>
                                    </ul>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </section>
        </div>
    </div>
{% endblock %}
